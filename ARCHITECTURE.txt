
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    DMX FIRE CONTROLLER ARCHITECTURE                           â•‘
â•‘                          1,500 Candles System                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           HARDWARE DATA FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  DMX Console â”‚ USB     â”‚  ENTTEC DMX USB  â”‚ Serial  â”‚  macOS Computer â”‚
  â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Pro Mk2        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Fire Controllerâ”‚
  â”‚ (Lighting    â”‚  XLR    â”‚  (Serial Adapter)â”‚  /dev/  â”‚   (Python)      â”‚
  â”‚  Desk)       â”‚         â”‚                  â”‚  tty.*  â”‚                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                  â”‚
       DMX Universe 1                                            â”‚ sACN
       Channels 1-6:                                             â”‚ Network
       â€¢ Ch 1: Bank 1 Intensity      (0-255)                     â”‚ (UDP)
       â€¢ Ch 2: Bank 2 Intensity      (0-255)                     â”‚
       â€¢ Ch 3: Bank 3 Intensity      (0-255)                     â”‚
       â€¢ Ch 4: Flicker Intensity     (0-255)                     â–¼
       â€¢ Ch 5: Yellowâ†’Red Shift      (0-255)          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â€¢ Ch 6: Blue Component        (0-255)          â”‚   WLED Device      â”‚
                                                      â”‚  192.168.4.74      â”‚
                                                      â”‚                    â”‚
                                                      â”‚  1,500 RGB LEDs    â”‚
                                                      â”‚  (WS2812B strip)   â”‚
                                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SOFTWARE ARCHITECTURE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                      DMXFireController (Main Loop)                       â”‚
  â”‚                           Target: 60 FPS                                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                            â”‚                          â”‚
           â–¼                            â–¼                          â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ DMX Input Layer â”‚         â”‚  Fire Effects    â”‚      â”‚  sACN Output     â”‚
  â”‚                 â”‚         â”‚  Rendering       â”‚      â”‚  Layer           â”‚
  â”‚ â€¢ Poll serial   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚â”€â”€â”€â”€â”€â–¶â”‚                  â”‚
  â”‚ â€¢ Drain buffer  â”‚  Values â”‚ â€¢ 3 Flame Banks  â”‚ RGB  â”‚ â€¢ 9 Universes    â”‚
  â”‚ â€¢ Hysteresis    â”‚         â”‚ â€¢ Color control  â”‚ Data â”‚ â€¢ Unicast to IP  â”‚
  â”‚ â€¢ Smooth ramp   â”‚         â”‚ â€¢ Flicker ctrl   â”‚      â”‚ â€¢ 512 ch each    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LED BANK ORGANIZATION                               â”‚
â”‚                         (1,500 Total Pixels)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ FLAME BANK 1: 500 pixels (DMX Ch 1)                                     â”‚
  â”‚ Pixels: 0 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 499      â”‚
  â”‚ [ğŸ”¥][ğŸ”¥][ğŸ”¥][ğŸ”¥][ğŸ”¥]...(500 independent fire pixels)...[ğŸ”¥][ğŸ”¥][ğŸ”¥]      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ FLAME BANK 2: 500 pixels (DMX Ch 2)                                     â”‚
  â”‚ Pixels: 500 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 999      â”‚
  â”‚ [ğŸ”¥][ğŸ”¥][ğŸ”¥][ğŸ”¥][ğŸ”¥]...(500 independent fire pixels)...[ğŸ”¥][ğŸ”¥][ğŸ”¥]      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ FLAME BANK 3: 500 pixels (DMX Ch 3)                                     â”‚
  â”‚ Pixels: 1000 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 1499     â”‚
  â”‚ [ğŸ”¥][ğŸ”¥][ğŸ”¥][ğŸ”¥][ğŸ”¥]...(500 independent fire pixels)...[ğŸ”¥][ğŸ”¥][ğŸ”¥]      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         sACN UNIVERSE MAPPING                               â”‚
â”‚                    (170 LEDs per Universe @ 3ch RGB)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Universe 1: Pixels    0 - 169   (510 channels: R,G,B Ã— 170)
  Universe 2: Pixels  170 - 339   (510 channels: R,G,B Ã— 170)
  Universe 3: Pixels  340 - 509   (510 channels: R,G,B Ã— 170)
  Universe 4: Pixels  510 - 679   (510 channels: R,G,B Ã— 170)
  Universe 5: Pixels  680 - 849   (510 channels: R,G,B Ã— 170)
  Universe 6: Pixels  850 - 1019  (510 channels: R,G,B Ã— 170)
  Universe 7: Pixels 1020 - 1189  (510 channels: R,G,B Ã— 170)
  Universe 8: Pixels 1190 - 1359  (510 channels: R,G,B Ã— 170)
  Universe 9: Pixels 1360 - 1499  (420 channels: R,G,B Ã— 140)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ADVANCED COLOR CONTROL SYSTEM                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Three Independent Color Parameters (Channels 4-6):

  ğŸ¨ Channel 4: Flicker Intensity (0-255)
     â”œâ”€ 0:   Slow, gentle transitions (2x slower than default)
     â”œâ”€ 127: Normal transition speed
     â””â”€ 255: Fast, dramatic flickering (2x faster than default)

     Effect: Controls how quickly flames change color and brightness
            Lower = smooth, meditative flame
            Higher = energetic, dancing flame

  ğŸŸ¡ Channel 5: Yellow â†’ Red Shift (0-255)
     â”œâ”€ 0:   Maximum yellow (high green component)
     â”‚       Pure yellow-orange candle color
     â”œâ”€ 127: Warm orange (moderate green reduction)
     â””â”€ 255: Deep red (70% green reduction)
     â”‚       Red-orange ember color

     Effect: Reduces green component to shift from yellow to red
            Simulates temperature: Yellow = hotter, Red = cooler

  ğŸ”µ Channel 6: Blue Component (0-255)
     â”œâ”€ 0:   No blue (pure fire colors)
     â”œâ”€ 127: Moderate blue (warm white tint)
     â””â”€ 255: Maximum blue (white-hot appearance)

     Effect: Adds blue to create white-hot flames
            Simulates extremely high temperature combustion
            Independent from yellow/red shift

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        COLOR COMBINATION EXAMPLES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Classic Candle:
  â€¢ Ch5 (Yâ†’R): 0%     (yellow)
  â€¢ Ch6 (Blue): 0%    (no blue)
  â†’ Pure yellow-orange flame

  White-Hot Flame:
  â€¢ Ch5 (Yâ†’R): 0%     (yellow)
  â€¢ Ch6 (Blue): 100%  (maximum blue)
  â†’ Bright white with yellow tint (like gas flame)

  Deep Red Ember:
  â€¢ Ch5 (Yâ†’R): 100%   (red)
  â€¢ Ch6 (Blue): 0%    (no blue)
  â†’ Deep red-orange (smoldering coals)

  Warm Orange with Whiteness:
  â€¢ Ch5 (Yâ†’R): 30%    (slight red shift)
  â€¢ Ch6 (Blue): 20%   (touch of blue)
  â†’ Warm orange with subtle white highlights

  Intense White Fire:
  â€¢ Ch5 (Yâ†’R): 0%     (yellow)
  â€¢ Ch6 (Blue): 50%   (moderate blue)
  â€¢ Ch4 (Flicker): 100% (fast)
  â†’ Bright, energetic white-yellow flame

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FIRE EFFECT ALGORITHM                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ğŸ”¥ SmoothFirePixel Color Generation:

     1. Red Component (R):
        â€¢ Always high: 90-100% of 255
        â€¢ Slight random variation per pixel
        â€¢ Base: random(230, 255)

     2. Green Component (G):
        â€¢ Normal distribution: mean=55%, std=15%
        â€¢ Clamped to 30-80% range
        â€¢ Modified by Ch5 (Yâ†’R shift):
          green = green Ã— (1.0 - channel5 Ã— 0.7)
        â€¢ Creates yellow (high G) to red (low G) spectrum

     3. Blue Component (B):
        â€¢ Random base: 30-100
        â€¢ Scaled by Ch6 (blue amount):
          blue = base_blue Ã— channel6
        â€¢ Independent control for white-hot appearance

     4. Transitions:
        â€¢ Smooth interpolation between colors
        â€¢ Variable speed: 0.05s to 2.5s per transition
        â€¢ Smoothstep easing function
        â€¢ Speed modified by Ch4 (flicker intensity)

     5. Brightness Waxing/Waning:
        â€¢ Sine wave intensity modulation
        â€¢ Base intensity: 40-90% (random per pixel)
        â€¢ Phase offset: randomized
        â€¢ Creates natural flickering rhythm

     6. Rare Special Colors (1% chance):
        â€¢ White-hot flash: RGB(255, 255, 200)
        â€¢ Blue flame flash: RGB(100, 150, 255)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PERFORMANCE OPTIMIZATIONS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  âš¡ Ultra-Low Latency:
     â€¢ Serial timeout: 1ms (minimal delay)
     â€¢ Buffer draining: up to 10 DMX packets per frame
     â€¢ Non-blocking I/O throughout

  ğŸ“Š Noise Reduction:
     â€¢ Hysteresis filtering: ignores changes < 2% (5 DMX values)
     â€¢ Smooth interpolation: 30% ramp per frame
     â€¢ Display threshold: only shows banks > 1% intensity

  ğŸ”§ Rendering Efficiency:
     â€¢ Pre-allocated universe buffers
     â€¢ Single-threaded (no context switching)
     â€¢ Independent random number generators per pixel
     â€¢ Direct RGB calculation (no palette lookups)

  ğŸ“ˆ Monitoring:
     â€¢ Real-time FPS display
     â€¢ DMX packet rate (packets/second)
     â€¢ Latency measurement (ms since last DMX packet)
     â€¢ Active bank status with percentages
     â€¢ Live color control values

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PLATFORM-SPECIFIC CONFIGURATION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  âš ï¸  CRITICAL: Serial Port Configuration

  macOS (Darwin):
  â€¢ MUST use: /dev/cu.usbserial-EN######
  â€¢ DO NOT use: /dev/tty.usbserial-EN######
  â€¢ Reason: tty devices will HANG indefinitely on open()
  â€¢ Find device: ls -la /dev/cu.usbserial-*

  Windows:
  â€¢ Format: COM3, COM4, COM5, etc.
  â€¢ Find device: Device Manager â†’ Ports (COM & LPT)
  â€¢ Look for: "ENTTEC DMX USB PRO" or "USB Serial Port"

  Linux:
  â€¢ Format: /dev/ttyUSB0, /dev/ttyUSB1, etc.
  â€¢ Find device: ls -la /dev/ttyUSB*
  â€¢ Permissions: sudo usermod -a -G dialout $USER (then logout/login)

  Common Issues:
  â€¢ macOS hang â†’ Using tty instead of cu
  â€¢ "Multiple access on port" â†’ Another process using the serial port
  â€¢ "Permission denied" (Linux) â†’ Not in dialout group
  â€¢ "Device not found" â†’ Unplug and replug ENTTEC, wait 5 seconds

  See ENTTEC_SETUP_GUIDE.md for detailed troubleshooting

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            TECHNICAL DETAILS                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Hardware:
  â€¢ ENTTEC DMX USB Pro (115200 baud)
  â€¢ Serial port: /dev/cu.usbserial-EN437698 (macOS example)
  â€¢             COM3 (Windows example)
  â€¢             /dev/ttyUSB0 (Linux example)
  â€¢ WLED device: 192.168.4.74
  â€¢ LED type: WS2812B (or compatible)

  Software:
  â€¢ Language: Python 3
  â€¢ DMX Library: pyserial (custom ENTTEC implementation)
  â€¢ sACN Library: sacn
  â€¢ Main file: dmx_fire_controller.py

  Network:
  â€¢ Protocol: sACN (Streaming ACN / E1.31)
  â€¢ Unicast transmission (not multicast)
  â€¢ 9 universes (1-9)
  â€¢ 60 FPS target refresh rate

  Processing:
  â€¢ 1,500 pixels Ã— 60 FPS = 90,000 pixel updates/second
  â€¢ Each pixel: independent RNG, color generation, transitions
  â€¢ ~52 FPS sustained (very close to 60 FPS target)
  â€¢ CPU usage: ~18-20% single core

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  Performance: ~52 FPS | DMX Rate: ~90 pkt/s | Latency: 5-80ms                â•‘
â•‘  Typical Status: B1:99% B2:99% B3:99% | Flicker:100% | Yâ†’R:29% | Blue:21%   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USAGE INSTRUCTIONS                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Starting the Controller:
    python3 dmx_fire_controller.py

  Debug Mode (shows real-time DMX values):
    python3 dmx_fire_controller.py --debug

  Stopping the Controller:
    Press Ctrl+C

  Killing Hung Processes:
    lsof -ti :5568 | xargs kill -9

  DMX Console Setup:
    1. Set console to output DMX Universe 1
    2. Patch channels 1-6 to faders
    3. Bring up intensity to see flames
    4. Adjust color controls to taste

  Recommended Starting Values:
    â€¢ Ch1-3: 255 (all banks full)
    â€¢ Ch4: 127 (medium flicker)
    â€¢ Ch5: 0   (yellow flames)
    â€¢ Ch6: 0   (no blue)

  Color Exploration:
    1. Start with classic candle (Ch5=0, Ch6=0)
    2. Add blue gradually (Ch6: 0â†’100) for white-hot
    3. Shift to red (Ch5: 0â†’100) for ember glow
    4. Mix both for custom colors
    5. Adjust flicker (Ch4) for desired energy level

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PROJECT FILES                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Main Controller:
  â€¢ dmx_fire_controller.py      - Primary integrated controller (1500 LEDs)

  Testing & Reference:
  â€¢ test_dmx_input.py            - DMX input testing utility
  â€¢ fire-effects/fire_flicker.py - Simple single-pixel fire
  â€¢ fire-effects/fire_multi.py   - Multi-pixel independent animation
  â€¢ fire-effects/fire_smooth.py  - Smooth transitions reference
  â€¢ fire-effects/show_control.py - sACN-based show control (original)

  Documentation:
  â€¢ README_DMX_FIRE.md           - DMX fire controller guide
  â€¢ CLAUDE_LIGHTS_REFERENCE.md   - Claude Lights integration
  â€¢ ARCHITECTURE.txt             - This file
  â€¢ CLAUDE.md                    - Project overview

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           END OF ARCHITECTURE DOCUMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
